# chapter18
tankgame-mutiThread-oop
# 坦克大战
写项目的感悟：
1. 整个项目最重要的是分析需求！！！
2. 将需求拆解成 功能点
3. 对每一个功能点进行实现
4. 大框架先写出来，后面可以再进行优化

## 分析如何实现当用户按下J键，我们的坦克就发射一颗子弹
思路分析：
1. 当发射一颗子弹后，就相当于启动一个线程，需要一个单独的Shot类，并实现 Runnable 接口
2. Hero（己放坦克） 有子弹的对象，当按下 J 时，我们就启动一个发射行为（线程），让子弹不停的移动，形成一个射击的效果
3. 我们 MyPanel 需要不停的重绘子弹，才能出现该效果
4. 当子弹移动到面板的边界时，就应该销毁（把启动的子弹的线程销毁）

![image.png](https://note.youdao.com/yws/res/2/WEBRESOURCEabafb04a81fc70a2f78e9d7bcdbb6e42)

## 让敌人的坦克也能够发射子弹（可以有多颗子弹）
1. 在敌人坦克类，使用Vector 保存多个Shot
2. 当每创建一个敌人坦克对象，给该敌人坦克对象初始化一个Shot对象，同时启动Shot
3. 在绘制敌人坦克时，需要遍历敌人坦克对象Vector ，绘制所有的子弹，当子弹isLive == false 时，就从Vector移除

## 当我方坦克击中敌人坦克时，敌人的坦克就消失
1. 在 MyPanel 不断重绘的过程中，判断hero发射的子弹是否击中了敌方坦克
2. 如果击中了敌方坦克，则敌方坦克和子弹都消失

## 爆炸效果
1. 新增一个爆炸类，爆炸类拥有生命周期
2. 当击中了敌方坦克的时候，new一个爆炸类
2. 在不断重绘的过程中，爆炸类的生命周期会减少直到为0，在不同的生命周期展示不同的图片即可演示爆炸效果。

## 让敌人的坦克也可以自由随机的上下左右移动
思路分析：
1. 因为要求敌人的坦克，可以自由移动，因此需要将敌人坦克当做线程使用
2. 我们需要EnemyTank implements Runnable
3. 在run 方法写上我们相应的业务代码。

## 控制我方的坦克和敌方的坦克在限定范围内移动
思路分析：
1. 敌方的坦克则在敌方坦克各自线程上面做限制
2. 我方坦克的移动在接收键盘指令的地方做限制


---

![image.png](https://note.youdao.com/yws/res/6/WEBRESOURCE4ecaf8b7e31efaa96097a1ebe45c48e6)

## 我方坦克在发射的子弹消亡后，才能发射新的子弹-拓展(发多颗子弹怎么办)
老韩思路：
1. 在按下J键，我们判断当前hero 对象的子弹，是否已经销毁
2. 如果没有销毁，就不去触发 ==shotEnemyTank==
3. 如果已经销毁，才去触发 ==shotEnemyTank==
4. 如果要发射多颗子弹，在hero 里使用 Vector 保存
5. 如果只能发射5颗子弹，在 shotEnemyTank 判断子弹数量

## 当敌人坦克发射的子弹消亡后，可以再发射子弹
思路：
1. 在敌人的坦克的线程里面设置条件，如果敌人的子弹小于5，则新增敌人的子弹线程
2. 在绘制子弹的地方判断子弹是否存活，如果子弹存活，则删除子弹

## 当敌方的坦克击中我方的坦克时，我方坦克消失
思路：
1. 与我方的坦克击中敌方的坦克一致，复用 hitTank 方法
